<!DOCTYPE html>
<html>
  <head>
    <title>Milliefetch</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    
    

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    
        <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

      <script src="https://js.stripe.com/v3/"></script>
      

  </head>

  <body>

<br> 


<h1>MillieFetch Multiple document upload</h1>
<% if !flash[:notice].blank? %>
   <div class = "alert alert-info">
      <%= flash[:notice] %>
   </div>
<% end %>  
  

<div class='mul_container'>

<% @all_uploads.each_with_index do |m, i| %>
<% m.library_files.each do |mf| %>
<div class='mul_form'>
   <a href='<%= url_for(mf) %>'><%= url_for(mf).to_s.split('/')[-1] %></a>
   <%= form_for :new_uploads, id: "form_"+i.to_s do |f| %>
    <br>
        <p><%= f.text_field :id, value: m.id.to_s, hidden: true %></p>
      <%= f.label :Folder_Title %>   
      <%= f.text_field :folder_title, list:'folder_title' %>  
      <br><br>  
      <%= f.label :FOIA_ID %>   
      <%= f.text_field :FOIA_ID, list:'FOIA_ID' %> 
      <br><br> 
      <%= f.label :Local_ID %>   
      <%= f.text_field :local_id, list:'local_id', value: m.local_id %> 
      <br><br> 
      <%= f.label :status %>   
      <%= f.text_field :status, list:'status', value: m.status %>
      <br><br> 
      <%= f.label :record_collection %>   
      <%= f.text_field :record_collection,list:'record_collection', value: m.record_collection %>   
      <br><br> 
      <%= f.label :office_origin%>   
      <%= f.text_field :office_origin, list:'office_origin', value: m.office_origin %> 
      <br><br> 
      <%= f.label :series %>   
      <%= f.text_field :series,list:'series', value: m.series, class: 'auto_flow' %> 
      <br><br> 
      <%= f.label :subseries %>   
      <%= f.text_field :subseries,list:"subseries", value: m.subseries %>  
      <br><br>
      <%= f.label :box_type %>   
      <%= f.text_field :box_type, list: 'box_type', value: m.box_type %> 
      <br><br>
      <%= f.label :box_number %>   
      <%= f.text_field :box_number, list: 'box_number', value: m.box_number %>
      <br><br>
      <%= f.label :note_field %>   
      <%= f.text_field :note_field, list:'note_field', value: "Entry number: " + i.to_s %> 
      <br><br>
      <%= f.label :attachment %>   
      <p> Using file located at :<%= url_for(mf) %></p>
      <%= f.text_field :attachment, list:'attachment', hidden: true, value: url_for(mf) %> 
      <br><br> 
      <%= f.submit "Save", class:"btn btn-primary" %>  
   <% end %>
</div>
<% end %>
<% end %>
</div>
<br />   
<br />
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

</body>
</html>

